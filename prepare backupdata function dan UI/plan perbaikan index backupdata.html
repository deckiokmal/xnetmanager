<!-- Modal Detail Backup -->
<div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-black" id="detailModalLabel">Detail Backup</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-black">
                <p><strong>Nama Backup:</strong> <span id="detailBackupName"></span></p>
                <p><strong>Description:</strong> <span id="detailBackupDescription"></span></p>
                <p><strong>Versi:</strong> <span id="detailBackupVersion"></span></p>
                <p><strong>Tanggal Dibuat:</strong> <span id="detailBackupDate"></span></p>
                <p><strong>Konten Backup:</strong></p>
                <pre><code id="detailBackupContent"></code></pre> <!-- Tempatkan konten file disini -->

                <!-- Tampilkan Riwayat Commit -->
                <h5>Commit History</h5>
                <ul id="commitHistoryList"></ul>
            </div>
        </div>
    </div>
</div>


function viewBackupDetail(backupId) {
fetch(`/backup/${backupId}`)
.then(response => response.json())
.then(data => {
if (data.success === false) {
alert(data.message);
} else {
document.getElementById('detailBackupName').textContent = data.backup_name;
document.getElementById('detailBackupDescription').textContent = data.description;
document.getElementById('detailBackupVersion').textContent = data.version;
document.getElementById('detailBackupDate').textContent = data.created_at;
document.getElementById('detailBackupContent').textContent = data.backup_content;

// Isi riwayat commit
const commitHistoryList = document.getElementById('commitHistoryList');
commitHistoryList.innerHTML = ''; // Bersihkan daftar sebelumnya
data.commit_history.forEach(commit => {
const listItem = document.createElement('li');
listItem.textContent = `${commit.date}: ${commit.message} (Commit: ${commit.hash})`;
commitHistoryList.appendChild(listItem);
});

const detailModal = new bootstrap.Modal(document.getElementById('detailModal'));
detailModal.show();
}
})
.catch(error => console.error('Error:', error));
}


<!-- Rollback to a specific commit -->
<form id="rollbackForm" method="post" action="">
    <div class="mb-3">
        <label for="rollbackCommitHash" class="form-label">Rollback to Commit</label>
        <select class="form-select" id="rollbackCommitHash" name="rollback_commit_hash">
            <!-- Options will be populated dynamically based on commit history -->
        </select>
    </div>
    <button type="submit" class="btn btn-danger">
        <i class="fas fa-undo"></i> Rollback
    </button>
</form>


function viewBackupDetail(backupId) {
fetch(`/backup/${backupId}`)
.then(response => response.json())
.then(data => {
if (data.success === false) {
alert(data.message);
} else {
document.getElementById('detailBackupName').textContent = data.backup_name;
document.getElementById('detailBackupDescription').textContent = data.description;
document.getElementById('detailBackupVersion').textContent = data.version;
document.getElementById('detailBackupDate').textContent = data.created_at;
document.getElementById('detailBackupContent').textContent = data.backup_content;

// Isi riwayat commit
const commitHistoryList = document.getElementById('commitHistoryList');
commitHistoryList.innerHTML = ''; // Bersihkan daftar sebelumnya
const rollbackSelect = document.getElementById('rollbackCommitHash');
rollbackSelect.innerHTML = ''; // Bersihkan opsi sebelumnya

data.commit_history.forEach(commit => {
const listItem = document.createElement('li');
listItem.textContent = `${commit.date}: ${commit.message} (Commit: ${commit.hash})`;
commitHistoryList.appendChild(listItem);

const option = document.createElement('option');
option.value = commit.hash;
option.textContent = `${commit.date}: ${commit.message}`;
rollbackSelect.appendChild(option);
});

const detailModal = new bootstrap.Modal(document.getElementById('detailModal'));
detailModal.show();
}
})
.catch(error => console.error('Error:', error));
}