Untuk konfigurasi SD-WAN pada FortiGate dengan menggunakan dual HUB, berikut adalah langkah-langkah utama yang perlu diikuti:

### Implementasi

#### A. Konfigurasi HUB DC

1. **Pastikan koneksi undelay SPOKE dapat dijangkau oleh HUB dengan tes PING.**
2. **Buat VPN Interface (IPSec) pada HUB untuk menerima dialup connection dari SPOKE.**

#### Phase 1 Interface
Berikut adalah contoh konfigurasi untuk Phase 1 Interface pada HUB DC:

```plaintext
config vpn ipsec phase1-interface
    edit "DC-MAIN"
        set type dynamic
        set interface "wan1"
        set ike-version 2
        set local-gw 172.16.0.1
        set peertype any
        set net-device disable
        set mode-cfg enable
        set proposal aes256-sha256
        set add-route disable
        set dpd on-idle
        set dhgrp 14
        set auto-discovery-sender enable
        set network-overlay enable
        set network-id 1
        set ipv4-start-ip 169.251.100.2
        set ipv4-end-ip 169.251.100.253
        set ipv4-netmask 255.255.255.0
        set psksecret S3cr3tKEY-SdWAn!23
        set dpd-retryinterval 21
    next
    edit "DC-BCKP"
        set type dynamic
        set interface "wan2"
        set ike-version 2
        set local-gw 123.231.0.1
        set peertype any
        set net-device disable
        set mode-cfg enable
        set proposal aes256-sha256
        set add-route disable
        set dpd on-idle
        set dhgrp 14
        set auto-discovery-sender enable
        set network-overlay enable
        set network-id 2
        set ipv4-start-ip 169.251.200.2
        set ipv4-end-ip 169.251.200.253
        set ipv4-netmask 255.255.255.0
        set psksecret S3cr3tKEY-SdWAn!23
        set dpd-retryinterval 21
    next
end
```

#### Phase 2 Interface
Berikut adalah contoh konfigurasi untuk Phase 2 Interface pada HUB DC:

```plaintext
config vpn ipsec phase2-interface
    edit "DC-MAIN"
        set phase1name "DC-MAIN"
        set proposal aes256-sha256
        set dhgrp 14
        set keepalive enable
    next
    edit "DC-BCKP"
        set phase1name "DC-BCKP"
        set proposal aes256-sha256
        set dhgrp 14
        set keepalive enable
    next
end
```

#### B. Konfigurasi SPOKE
1. **Pastikan koneksi undelay SPOKE ke HUB DC dan HUB DR reachable dengan tes PING.**
2. **Buat VPN Interface (IPSec) pada SPOKE untuk melakukan dialing ke HUB.**

#### Phase 1 Interface pada SPOKE
Berikut adalah contoh konfigurasi untuk Phase 1 Interface pada SPOKE:

```plaintext
config vpn ipsec phase1-interface
    edit "DC-MAIN"
        set interface "wan1"
        set ike-version 2
        set peertype any
        set net-device enable
        set mode-cfg enable
        set proposal aes256-sha256
        set add-route disable
        set dpd on-idle
        set dhgrp 14
        set idle-timeout enable
        set auto-discovery-receiver enable
        set network-overlay enable
        set network-id 1
        set remote-gw 172.16.0.1
        set psksecret S3cr3tKEY-SdWAn!23
        set dpd-retryinterval 21
    next
    edit "DC-BCKP"
        set interface "wan2"
        set ike-version 2
        set peertype any
        set net-device enable
        set mode-cfg enable
        set proposal aes256-sha256
        set add-route disable
        set dpd on-idle
        set dhgrp 14
        set idle-timeout enable
        set auto-discovery-receiver enable
        set network-overlay enable
        set network-id 2
        set remote-gw 123.231.0.1
        set psksecret S3cr3tKEY-SdWAn!23
        set dpd-retryinterval 21
    next
end
```

#### Phase 2 Interface pada SPOKE
Berikut adalah contoh konfigurasi untuk Phase 2 Interface pada SPOKE:

```plaintext
config vpn ipsec phase2-interface
    edit "DC-MAIN"
        set phase1name "DC-MAIN"
        set proposal aes256-sha256
        set dhgrp 14
        set keepalive enable
    next
    edit "DC-BCKP"
        set phase1name "DC-BCKP"
        set proposal aes256-sha256
        set dhgrp 14
        set keepalive enable
    next
end
```

### Konfigurasi Tambahan

1. **Atur interface tunnel agar dapat menerima PING, SSH, dan HTTPS.**
2. **Buat SDWAN interface untuk melakukan traffic steering.**
3. **Atur policy firewall untuk melewatkan koneksi VPN dari HUB ke LAN SPOKE dan sebaliknya.**
4. **Atur routing BGP untuk menerima koneksi dari arah HUB dan advertise network SPOKE.**

Dengan mengikuti langkah-langkah ini, Anda akan dapat mengkonfigurasi SD-WAN pada FortiGate dengan dual HUB untuk memastikan jaringan yang aman dan terkelola dengan baik.